<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MakeYourTrip - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –ø–æ –†–æ—Å—Å–∏–∏</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- –ò–∫–æ–Ω–∫–∏ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- –ù–∞—à–∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="css/main.css">
    <style>
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="gradient-bg min-h-screen flex flex-col">
    <!-- Header -->
    <header class="flex justify-between items-center p-6 md:p-8">
        <h1 class="text-2xl md:text-3xl font-bold text-white">MakeYourTrip</h1>
        <div id="authContainer">
            <a href="auth.html" class="bg-white/20 backdrop-blur-sm border border-white/30 text-white px-6 py-3 rounded-full font-semibold hover:bg-white/30 transition-all hover:-translate-y-1 hover:shadow-lg">
                –í–æ–π—Ç–∏ / –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
            </a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col items-center justify-center px-4 text-center">
        <h2 class="text-4xl md:text-5xl font-bold text-white mb-6">–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–æ –†–æ—Å—Å–∏–∏</h2>
        
        <p class="text-xl text-white/90 max-w-2xl mb-12">
            –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã –¥–ª—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è:<br>
            ‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä ‚Äî –∑–Ω–∞–µ—Ç–µ –∫—É–¥–∞ –µ–¥–µ—Ç–µ, –Ω—É–∂–µ–Ω –ø–ª–∞–Ω<br>
            ‚Ä¢ –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä ‚Äî –ø–æ–º–æ–∂–µ–º –≤—ã–±—Ä–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        </p>

        <h3 class="text-2xl font-semibold text-white mb-10">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:</h3>

        <div class="flex flex-col md:flex-row gap-8 max-w-4xl">
            <!-- Card 1 -->
            <a href="definite.html" class="card-hover bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-8 cursor-pointer w-full md:w-1/2 block hover:no-underline">
                <div class="text-3xl mb-4">üìç</div>
                <h4 class="text-2xl font-bold text-white mb-4">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä</h4>
                <p class="text-white/80">–ó–Ω–∞—é –∫—É–¥–∞ –µ–¥—É, –Ω—É–∂–µ–Ω –ø–ª–∞–Ω –ø–æ–µ–∑–¥–∫–∏</p>
            </a>

            <!-- Card 2 -->
            <div onclick="selectMode('indefinite')" class="card-hover bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-8 cursor-pointer w-full md:w-1/2">
                <div class="text-3xl mb-4">ü§î</div>
                <h4 class="text-2xl font-bold text-white mb-4">–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä</h4>
                <p class="text-white/80">–ü–æ–º–æ–≥–∏—Ç–µ –≤—ã–±—Ä–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-6 text-white/70">
        ¬© 2023 MakeYourTrip. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
    </footer>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="js/api.js"></script>
    <script src="js/utils.js"></script>
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        function checkAuth() {
            const token = localStorage.getItem('access_token');
            const container = document.getElementById('authContainer');
            
            if (token && window.api) {
                // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                window.api.getCurrentUser()
                    .then(user => {
                        container.innerHTML = `
                            <div class="flex items-center space-x-4">
                                <span class="text-white/80">–ü—Ä–∏–≤–µ—Ç, ${user.username}!</span>
                                <a href="profile.html" class="bg-white/20 backdrop-blur-sm border border-white/30 text-white px-6 py-3 rounded-full font-semibold hover:bg-white/30 transition-all hover:-translate-y-1 hover:shadow-lg">
                                    <i class="fas fa-user mr-2"></i>–ü—Ä–æ—Ñ–∏–ª—å
                                </a>
                            </div>
                        `;
                    })
                    .catch(() => {
                        // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞
                        container.innerHTML = `
                            <a href="auth.html" class="bg-white/20 backdrop-blur-sm border border-white/30 text-white px-6 py-3 rounded-full font-semibold hover:bg-white/30 transition-all hover:-translate-y-1 hover:shadow-lg">
                                –í–æ–π—Ç–∏ / –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                            </a>
                        `;
                    });
            }
        }

        // –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
        function selectMode(mode) {
            if (mode === 'indefinite') {
                if (window.UIUtils) {
                    window.UIUtils.showNotification('–†–µ–∂–∏–º "–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä" –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä".', 'info', 5000);
                } else {
                    alert('–†–µ–∂–∏–º "–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä" –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.');
                }
            }
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä –µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
            const token = localStorage.getItem('access_token');
            if (token) {
                fetch(`http://127.0.0.1:8000/api/mode/${mode}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                }).catch(() => {});
            }
        }

        // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', checkAuth);
    </script>
</body>
</html>